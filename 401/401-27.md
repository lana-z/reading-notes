### Class 27


## Class Notes

Remember that app in Django means a discrete area of work. Not a comprehensive app like we typically think of 'app'.

### A Django Project

#### CLI
- `mkdir [project-name]`
- `cd [project-name]`
- `git init`
- create virtual env `python3 -m venv .venv`
- activate `source .venv/bin/activate`
- `pip install django`
- create project `django-admin startproject project_name .` <- dot
  - note dot at end
- `touch README.md`
- `touch .gitignore`
- check file structure `tree`
- start server `python manage.py runserver`
  - should get a link - click link to check if server is running
  - note the red warning
- stop the server control C
- handle the red `python manage.py migrate`
  - migrations are the rules that apply to database interactions
- create an app `python manage.py startapp [appname-plural]`
- add req file and req `pip freeze > requirements.txt`
- `tree` if you'd like to check file structure
- `code .` to open in VS Code
  - add .venv to .gitignore
  - add README project info
- `git add .`
- `git commit -m "initial commit"`
- create repo on github
  - copy '…or push an existing repository from the command line' and run in terminal

#### Code setup in Project level
in Project/ settings.py
- add app name under INSTALLED APPS
  - `'appname',`
- add templates to DIRS
  -'DIRS': [
      `BASE_DIR / 'templates',`
        ],

in Project/ urls.py
- import include
  - add to the list of django urls imports `from django.urls import path, include`
- add to urlpatterns
  - `path('', include('appname.urls')),`
  - this is saying to the project, pass control to the urls listed in the app urls.py file

#### Code setup in App level: VUT

Create **Views**
```python
from django.views.generic import TemplateView, ListView, DetailView, CreateView, UpdateView, DeleteView

class HomeView(TemplateView):
  template_name = 'home.html'
  model =

class AppnameListView(ListView):
  template_name = 'appname_list.html'
  model =
```

in App/ models.py
- create Models
- import from python
```python
from django.contrib.auth import get_user_model
```
- create class Models
```python
class Appname(models.Model):
  name = models.CharField(max_length=256)
  purchaser = models.ForeignKey(get_user_model(), on_delete= models.CASCADE)
  description = models.TextField(max_length=256)
  rating = models.IntegerField(default=0)

  def __str__(self):
    return self.name
```


in App/ admin.py
- import from models.py
```python
from .models import Modelname
```
- register models
```python
admin.site.register(Modelname)
```

go back to App/ views.py
- import from the package
`from .models import Snack`

- add models
` = Modelname` on each view class


in Terminal
- migrate Models
  - `python manage.py makemigrations`
  - `python manage.py migrate`

-create database user
  - `python manage.py createsuperuser`
  - create username and password

<br>

Create **URLs**

in App/ create new file urls.py


```python
from django.urls import path
from .views import AppListView, AppDetailView, AppCreateView, AppUpdateView, AppDeleteView

urlpatterns = [
    path('admin/', admin.site.urls),
    path('', AppListView.as_view(), name='app_list'),
    path('<int:pk>/', AppDetailView.as_view(), name='app_detail'),
    path('create/', AppCreateView.as_view(), name='app_create'),
    path('<int:pk>/update/', AppUpdateView.as_view(), name='app_update'),
    path('<int:pk>/delete/', AppDeleteView.as_view(), name='app_delete'),
]
```
- another example:

```python
from django.urls import path
from .views import HomeView

urlpatterns = [
  path('', HomeView.as_view(), name='home')
]
```

<br>

Create **Templates**

- create folder `templates` at root
- create `base.html`
- create new files for each template
  - home.html
    - `!` DOCTYPE html
    - or see Tailwind example and instsall detail below

```python
{% load compress %}
{% load static %}

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Django + Tailwind CSS + Flowbite</title>

    {% compress css %}
        <link rel="stylesheet" href="{% static 'src/output.css' %}">
    {% endcompress %}

</head>

<body class="bg-green-50">
<header>
    <nav class="bg-green-50 border-gray-200 px-2 sm:px-4 py-2.5 rounded dark:bg-gray-800">
        <div class="container flex flex-wrap items-center justify-between mx-auto">
          <a href="{% url 'home' %}" class="flex items-center">
              <span class="self-center text-xl font-semibold whitespace-nowrap dark:text-white">Django Things</span>
          </a>
          <button data-collapse-toggle="mobile-menu" type="button" class="inline-flex items-center p-2 ml-3 text-sm text-gray-500 rounded-lg md:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600" aria-controls="mobile-menu" aria-expanded="false">
            <span class="sr-only">Open main menu</span>
            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg>
            <svg class="hidden w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>
          </button>
          <div class="hidden w-full md:block md:w-auto" id="mobile-menu">
            <ul class="flex flex-col mt-4 md:flex-row md:space-x-8 md:mt-0 md:text-sm md:font-medium">
              <li>
                <a href="{% url 'home' %}" class="block py-2 pl-3 pr-4 text-white bg-green-700 rounded md:bg-transparent md:text-green-700 md:p-0 dark:text-white" aria-current="page">Home</a>
              </li>
              <li>
                <a href="{% url 'about' %}" class="block py-2 pl-3 pr-4 text-gray-700 border-b border-gray-100 hover:bg-gray-50 md:hover:bg-transparent md:border-0 md:hover:text-green-700 md:p-0 dark:text-gray-400 md:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent dark:border-gray-700">About</a>
              </li>
            </ul>
          </div>
        </div>
      </nav>
</header>
<main>
    <div class="container mx-auto mt-4">
        {% block content %}
        {% endblock content %}
    </div>
</main>
<footer></footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.2.1/flowbite.min.js"></script>
</body>

</html>
```



### Tailwind

*Note shortcut for Tailwind without compressor and so many features:*
- (add from Class 28 demo)


in Terminal
- install npm
- install compressor
  - `python -m pip install django-compressor`
- add to requirements `pip freeze > requirements.txt`

in Project/ settings.py

- INSTALLED_APPS = [
    ...
`    'compressor',`
    ...

- at the bottom of the settings.py add
```python
COMPRESS_ROOT = BASE_DIR / 'static'

COMPRESS_ENABLED = True

STATICFILES_FINDERS = ('compressor.finders.CompressorFinder',)
```

in Root/ static/ src/ input.css
- add file in folder in folder
  - `static/src/input.css`


in App/ base.html

- at top
  - `{% load compress %}`
  - `{% load static %}`
  - `!`

- under title
  - `{% compress css %}`
  - `{% endcompress %}`

in Terminal
- `npm install -D tailwindcss`
- `npx tailwindcss init`
  - initializes a file in Root/ tailwind.config.js
    - module.exports = {
      content: [],
      - add `'./templates/**/&.html'`
- `pip freeze > requirements.txt`

in Root/
- add folders Static/ Src
- add new file input.css
- add code
```python
@tailwind base;
@tailwind components;
@tailwind utilities;
```

in new Terminal window
- run `npx tailwindcss -i ./static/src/input.css -o ./static/src/output.css --watch`
  - does not need venv

in Terminal
- start venv again `source .venv/bin/activate`

- run ` python manage.py runserver`



<br>
<br>

## Reading Notes

### Explain the purpose and basic structure of Django models. How do they help in creating and managing database schema in a Django application?

- Django models serve as a bridge between the database and the Django app, defining the database schema in Python code
  -  like blueprints for your database, telling Django how to store data in a database
- each model corresponds to a single database table, with model fields representing table columns
  - Think of each model as a table in the database, where the model's attributes represent the columns in the table.
- models abstract database operations, allowing for database-agnostic code and facilitating migrations to manage schema changes
  - let you use Python code instead of SQL - easier to work with different databases and update the database structure when needed

### Describe the primary features and functionality of the Django Admin interface. How can it be customized to suit the specific needs of a project?

- provides a web-based interface for CRUD operations on the database, using models directly
- you can customize field display, form layouts, add filters and configure list views
- ModelAdmin classes and decorators can be used to register models with the Admin interface and customize their look

### Briefly outline the key components and workflow of a Django application, as discussed in the Beginner’s Guide to Django. How do these components interact with each other to create a functional web application?

- Models define the data structure
- views handle the business logic and interaction with models
- templates render the response.
- URL mappers direct incoming requests to the appropriate view based on the URL pattern.
- The admin interface allows for easy management of model data through a web interface.
- Forms handle user input and validation, integrating closely with models for data integrity.
- The workflow typically involves a URL being mapped to a view, which interacts with models and renders a template.


## Things I want to learn more about
